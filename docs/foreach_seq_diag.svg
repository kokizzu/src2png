<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="973" height="432"><source><![CDATA[Note left of Node.js: For each input file:
Node.js -> Poi: Copy input file
Note right of Poi: Dev server hot update, \nregenerate page content
Puppeteer -> Poi: Request: page content
Poi -> Puppeteer: Response: highlighted code
Note right of Puppeteer: Render screenshot\n and save PNG
]]></source><desc/><defs><marker id="markerArrowBlock" markerHeight="5" markerWidth="5" orient="auto" refX="5" refY="2.5" viewBox="0 0 5 5"><path d="M 0 0 L 5 2.5 L 0 5 z"/></marker><marker id="markerArrowOpen" markerHeight="16" markerWidth="4" orient="auto" refX="9.6" refY="8" viewBox="0 0 9.6 16"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"/></marker></defs><g class="actor"><rect width="87.203" height="38" x="198.43" y="20" fill="#fff" stroke="#000" stroke-width="2"/><text x="208.43" y="44.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="208.43">Node.js</tspan></text></g><g class="actor"><rect width="87.203" height="38" x="198.43" y="374.375" fill="#fff" stroke="#000" stroke-width="2"/><text x="208.43" y="398.875" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="208.43">Node.js</tspan></text></g><line x1="242.031" x2="242.031" y1="58" y2="374.375" fill="none" stroke="#000" stroke-width="2"/><g class="actor"><rect width="48.797" height="38" x="381.648" y="20" fill="#fff" stroke="#000" stroke-width="2"/><text x="391.648" y="44.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="391.648">Poi</tspan></text></g><g class="actor"><rect width="48.797" height="38" x="381.648" y="374.375" fill="#fff" stroke="#000" stroke-width="2"/><text x="391.648" y="398.875" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="391.648">Poi</tspan></text></g><line x1="406.047" x2="406.047" y1="58" y2="374.375" fill="none" stroke="#000" stroke-width="2"/><g class="actor"><rect width="106.406" height="38" x="623.672" y="20" fill="#fff" stroke="#000" stroke-width="2"/><text x="633.672" y="44.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="633.672">Puppeteer</tspan></text></g><g class="actor"><rect width="106.406" height="38" x="623.672" y="374.375" fill="#fff" stroke="#000" stroke-width="2"/><text x="633.672" y="398.875" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="633.672">Puppeteer</tspan></text></g><line x1="676.875" x2="676.875" y1="58" y2="374.375" fill="none" stroke="#000" stroke-width="2"/><g class="note"><rect width="202.031" height="28" x="20" y="78" fill="#fff" stroke="#000" stroke-width="2"/><text x="25" y="97.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="25">For each input file:</tspan></text></g><g class="signal"><text x="252.031" y="136.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="252.031">Copy input file</tspan></text><line x1="242.031" x2="406.047" y1="144" y2="144" fill="none" stroke="#000" stroke-width="2" marker-end="url(&quot;#markerArrowBlock&quot;)"/></g><g class="note"><rect width="230.828" height="47.188" x="426.047" y="164" fill="#fff" stroke="#000" stroke-width="2"/><text x="431.047" y="183.5" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="431.047">Dev server hot update,</tspan><tspan x="431.047" dy="1.2em">regenerate page content</tspan></text></g><g class="signal"><text x="440.648" y="241.688" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="440.648">Request: page content</tspan></text><line x1="676.875" x2="406.047" y1="249.188" y2="249.188" fill="none" stroke="#000" stroke-width="2" marker-end="url(&quot;#markerArrowBlock&quot;)"/></g><g class="signal"><text x="416.641" y="279.688" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="416.641">Response: highlighted code</tspan></text><line x1="406.047" x2="676.875" y1="287.188" y2="287.188" fill="none" stroke="#000" stroke-width="2" marker-end="url(&quot;#markerArrowBlock&quot;)"/></g><g class="note"><rect width="173.219" height="47.188" x="696.875" y="307.188" fill="#fff" stroke="#000" stroke-width="2"/><text x="701.875" y="326.688" font-family="&quot;Andale Mono&quot;, monospace" font-size="16"><tspan x="701.875">Render screenshot</tspan><tspan x="701.875" dy="1.2em">and save PNG</tspan></text></g></svg>